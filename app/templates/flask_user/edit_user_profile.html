{% extends 'base.jinja2' %}
{% from "flask_user/_macros.html" import render_field, render_checkbox_field, render_submit_field %}

{% block title %}User Profile{% endblock %}
{% block form_title %}User Profile{% endblock %}

{% block content %}
    <div class='card mx-auto mt-5 col-lg-7 col-12 shadow-sm'>
        <div class='card-body'>
            <form action="" method="POST" novalidate class="form" role="form">
                {{ form.hidden_tag() }}
                <div class="row justify-content-between">
                    <div class="col-12 col-sm-6">
                        {{ render_submit_field(form.submit, tabindex=220) }}
                    </div>
                    <div class="col-12 col-sm-6">
                        {% if not user_manager.USER_ENABLE_AUTH0 %}
                            {% if user_manager.USER_ENABLE_CHANGE_PASSWORD %}
                                <p><a class="btn btn-default btn-primary" href="{{ url_for('user.change_password') }}">{% trans %}Change password{% endtrans %}</a></p>
                            {% endif %}
                        {% endif %}
                    </div>
                </div>

                <hr>

                <h5>Personal Info</h5>
                <div class="row">
                    <div class="col-12 col-sm-6">
                        {{ render_field(form.first_name, tabindex=10) }}
                        {{ render_field(form.middle_name, tabindex=20) }}
                        {{ render_field(form.last_name, tabindex=30) }}
                        {{ render_field(form.pref_name, tabindex=40) }}
                        {{ render_field(form.maiden_name, tabindex=50) }}
                        {{ render_field(form.birth_date, tabindex=60) }}
                    </div>
                    <div class="col-12 col-sm-6">
                        {{ render_field(form.thoroughfare, tabindex=70) }}
                        {{ render_field(form.premise, tabindex=80) }}
                        {{ render_field(form.locality, tabindex=90) }}
                        {{ render_field(form.administrative_area, tabindex=100) }}
                        {{ render_field(form.postal_code, tabindex=110) }}
                        {{ render_field(form.country, tabindex=120) }}
                    </div>
                </div>

                <hr>

                <div class="row">
                    <div class="col-12 col-sm-6">
                        <h5>MSU Info</h5>
                        {{ render_field(form.net_id, tabindex=130) }}
                        {{ render_field(form.msu_id, tabindex=140) }}
                        {{ render_field(form.department, tabindex=150) }}
                    </div>
                    <div class="col-12 col-sm-6">
                        <hr class="d-sm-block d-md-none"/>
                        <h5>Contact Info</h5>
                        {{ render_field(form.sec_email, tabindex=190) }}
                        {{ render_field(form.prim_phone, tabindex=200) }}
                        {{ render_field(form.sec_phone, tabindex=210) }}
                    </div>
                </div>

                <hr/>

                <div class="row justify-content-between">
                    <div class="col">
                        {{ render_submit_field(form.submit, tabindex=220) }}
                    </div>
                    <div class="col">
                        {% if not user_manager.USER_ENABLE_AUTH0 %}
                            {% if user_manager.USER_ENABLE_CHANGE_PASSWORD %}
                                <p><a class="btn btn-default btn-primary" href="{{ url_for('user.change_password') }}">{% trans %}Change password{% endtrans %}</a></p>
                            {% endif %}
                        {% endif %}
                    </div>
                </div>
            </form>
        </div>
    </div>


{% endblock %}

{% block js %}
    {{ super() }}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.js"></script>
    <script>
        $('#msu_id').mask("999-999-999", {placeholder: "000-000-000"});
        $('#prim_phone').mask('000-000-0000');
        $('#sec_phone').mask('000-000-0000');
        $('#postal_code').mask('00000');
    </script>
{% endblock %}
